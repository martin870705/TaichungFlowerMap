<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <style>
      select {
         width: 200px;
         height: 40px;
         border-radius: 5px;
      }

      path:hover {

         stroke: cadetblue;
      }

      .a {
         text-align: center;
      }
   </style>
</head>

<body>

   <form>
      <select name="city" id="city">
      </select>
      <select name="mouth" id="mouth">
         <option></option>
         <option>1月</option>

         <option>2月</option>
         <option>3月</option>
         <option>4月</option>
         <option>5月</option>
         <option>6月</option>
         <option>7月</option>
         <option>8月</option>
         <option>9月</option>
         </optgroup>
      </select>

      <script>
         const city_input = document.querySelector('#city')
         const mouth_input = document.querySelector('#mouth')
         let city_tag = ''
         let area_tag = ''
         let flower_tag = ''

         fetch('./臺中市賞花景點.json')
            .then(function (respomse) {
               return respomse.json()
            }).then(function (datas) {
               // console.log(datas[0]);
               datas.forEach(function (data, i) {
                  if (area_tag != data.行政區) {
                     city_input.innerHTML += `<optgroup label='${data.行政區}' class='a'></optgroup>`
                     if (city_tag != data.地點) {
                        city_input.innerHTML += `<option>${data.地點}</option>`
                        city_tag = data.地點
                     }
                     area_tag = data.行政區
                  }
                  else {
                     if (city_tag != data.地點) {
                        city_input.innerHTML += `<option>${data.地點}</option>`
                        city_tag = data.地點
                     }

                  }

                  city_input.addEventListener('change', function () {
                     // console.log(typeof(mouth_input.value));
                     if (city_input.value == data.地點) {
                        if (mouth_input.value == "") {
                           console.log(data);
                        }
                     }
                     // else{
                     //    if(city_input.value == data.地點 && mouth_input == datas[0].觀賞時期.substring(0,2)){
                     //       console.log(data);
                     //    }
                     // }
                  })
               })
            })

      </script>
</body>

</html>